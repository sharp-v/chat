{"version":3,"sources":["webpack:///./src/components/items/Avatar.vue?dee4","webpack:///./src/views/chat/Chat.vue?96a3","webpack:///./src/views/chat/children/MessageContainer.vue?b6a8","webpack:///./src/components/items/Avatar.vue","webpack:///./src/components/items/Avatar.vue?8b51","webpack:///./src/views/chat/Chat.vue","webpack:///./src/views/chat/children/MessageContainer.vue","webpack:///./src/views/chat/children/MessageContainer.vue?5ac0","webpack:///./src/views/chat/Chat.vue?af93"],"names":["round","width","size","height","src","avatarLink","props","type","String","default","mounted","render","__scopeId","class","t","viewBox","version","xmlns","p-id","d","fill","title","relation","remark","left-text","left-arrow","$router","go","push","right","name","getMessage","access","item","index","key","message","wrapperMessage","content","update","center","clearable","placeholder","focus","$event","enter","click","button","sendMessage","label","more","getMessageTime","isMine","getAvatar","senderKey","computed","state","current","methods","Object","id","messageId","url","components","Avatar","setup","count","loading","unReadCount","onRefresh","setTimeout","value","TYPE","map","length","userId","this","main","sendId","receiveId","contactId","sendType","createdAt","Date","now","commitMessage","toBottomSmooth","getUser","JSON","stringify","getRelation","user","toBottom","window","scrollTo","top","behavior","event","initMessage","getUnReadCount","updated","beforeUnmount","messageRead","updateActiveList","MessageContainer"],"mappings":"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","file":"js/chunk-20a683e3.6db3501f.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Avatar.vue?vue&type=style&index=0&id=77e4a452&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Chat.vue?vue&type=style&index=0&id=1dda6cc0&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MessageContainer.vue?vue&type=style&index=0&id=2c07308e&scoped=true&lang=css\"","<template>\r\n  <van-image round :width=\"size\" :height=\"size\" :src=\"avatarLink\" />\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    avatarLink: {\r\n      type: String,\r\n      default: require(\"assets/default/avatar.jpg\"),\r\n    },\r\n    size: {\r\n      type: String,\r\n      default: \"80\",\r\n    },\r\n  },\r\n  mounted() {\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.avatar {\r\n  position: relative;\r\n  margin: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n</style>","import { render } from \"./Avatar.vue?vue&type=template&id=77e4a452&scoped=true\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js\"\n\nimport \"./Avatar.vue?vue&type=style&index=0&id=77e4a452&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-77e4a452\"\n\nexport default script","<template>\r\n  <div class=\"chat\">\r\n    <van-nav-bar\r\n      :title=\"relation ? relation.remark : '备注'\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"$router.go(-1)\"\r\n      @click-right=\"$router.push('/relation-config')\"\r\n      class=\"nav-bar\"\r\n    >\r\n      <template #right>\r\n        <van-icon name=\"more\" size=\"24\" />\r\n      </template>\r\n    </van-nav-bar>\r\n    <div class=\"main\">\r\n      <!-- <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\r\n      </van-pull-refresh> -->\r\n        <div class=\"content\">\r\n          <div v-for=\"(item, index) in getMessage(access)\" :key=\"index\">\r\n            <message-container :message=\"wrapperMessage(item, index)\" />\r\n          </div>\r\n        </div>\r\n    </div>\r\n    <van-field\r\n      class=\"input-message-item blur-bg\"\r\n      v-model=\"content\"\r\n      center\r\n      clearable\r\n      placeholder=\"键盘回车建或点击右侧按钮发送消息\"\r\n      @focus=\"focus($event)\"\r\n      @keyup.enter=\"enter()\"\r\n      @update:model-value=\"update()\"\r\n      @click=\"click()\"\r\n    >\r\n      <template #button>\r\n        <button class=\"send-message-button\" @click=\"sendMessage\">发送</button>\r\n      </template>\r\n      <template #label>\r\n        <button class=\"more-message-button\" @click=\"more()\">\r\n          <svg\r\n            t=\"1631719738192\"\r\n            class=\"icon\"\r\n            viewBox=\"0 0 1024 1024\"\r\n            version=\"1.1\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            p-id=\"4493\"\r\n            width=\"128\"\r\n            height=\"128\"\r\n          >\r\n            <path\r\n              d=\"M511.979978 20.021899C240.362897 20.021899 20.162052 240.222744 20.162052 511.839825s220.200845 491.817926 491.817926 491.817926S1003.797904 783.456906 1003.797904 511.839825 783.617081 20.021899 511.979978 20.021899L511.979978 20.021899zM786.13984 506.333803l0 15.136556L785.999687 521.470358c-2.102299 32.79587-29.392148 58.764273-62.728609 58.764273L580.374785 580.234632l0 205.765056-78.005318 0L502.369467 785.859534c-32.815892-2.122321-58.764273-29.372126-58.764273-62.708588l0-142.916315L237.840138 580.234632l0-78.005318 0.140153 0c2.122321-32.815892 29.372126-58.784295 62.708588-58.784295l142.896293 0 0-142.916315 0-62.868763 78.005318 0 0 0.160175c32.815892 2.102299 58.764273 29.372126 58.764273 62.708588l0 142.916315 205.785077 0L786.13984 506.333803 786.13984 506.333803zM786.13984 506.333803\"\r\n              p-id=\"4494\"\r\n              fill=\"#1296db\"\r\n            ></path>\r\n          </svg>\r\n        </button>\r\n      </template>\r\n    </van-field>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { mapState, mapGetters, mapActions, mapMutations } from \"vuex\";\r\nimport { Toast } from \"vant\";\r\n\r\nimport { RELATION, USER_TYPE, MAX_SCROLL_VALUE } from \"../../common/config\";\r\nimport MessageContainer from \"./children/MessageContainer.vue\";\r\n\r\nexport default {\r\n  name: \"chat\",\r\n  setup() {\r\n    const count = ref(0);\r\n    const loading = ref(false);\r\n    const unReadCount = ref(0);\r\n    const onRefresh = () => {\r\n      setTimeout(() => {\r\n        Toast(\"待开发,bug++\");\r\n        loading.value = false;\r\n        count.value++;\r\n      }, 1000);\r\n    };\r\n\r\n    const relation = ref();\r\n    const content = ref(\"\");\r\n    const TYPE = RELATION.TYPE;\r\n\r\n    return {\r\n      relation,\r\n      content,\r\n      TYPE,\r\n      count,\r\n      loading,\r\n      onRefresh,\r\n      unReadCount,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      access: (state) => state.current.access,\r\n      map: (state) => state.message.map,\r\n      length: (state) => state.message.map.size,\r\n    }),\r\n    ...mapGetters([\r\n      \"getRelation\",\r\n      \"getMessage\",\r\n      \"getProfile\",\r\n      \"getMessageTime\",\r\n      \"getUnReadCount\",\r\n    ]),\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"messageRead\", \"updateActiveList\"]),\r\n    ...mapActions([\"initProfile\", \"commitMessage\", \"initMessage\"]),\r\n    sendMessage() {\r\n      const message = {\r\n        userId: this.relation.userId,\r\n        main: {\r\n          sendId: this.relation.userId,\r\n          receiveId: this.relation.contactId,\r\n          sendType: this.relation.type,\r\n          content: this.content,\r\n        },\r\n        state: null,\r\n        createdAt: Date.now(),\r\n      };\r\n      const key = this.access;\r\n      this.commitMessage({ key, message });\r\n      this.content = \"\";\r\n      this.toBottomSmooth();\r\n    },\r\n    getUser(message) {\r\n      let isMine = false;\r\n      let key = JSON.stringify({\r\n        id: message.main.sendId,\r\n        type: USER_TYPE,\r\n      });\r\n      const relation = this.getRelation(key);\r\n      let name = relation ? relation.remark : null;\r\n      isMine = message.main.sendId == message.userId;\r\n      return { name, key, isMine };\r\n    },\r\n    wrapperMessage(message, index) {\r\n      const user = this.getUser(message);\r\n      return {\r\n        id: message.id,\r\n        state: message.state,\r\n        type: message.main.type,\r\n        name: user.name,\r\n        isMine: user.isMine,\r\n        content: message.main.content,\r\n        sendId: message.main.sendId,\r\n        url: message.main.url,\r\n        key: user.key,\r\n        senderKey: message.senderKey,\r\n        index,\r\n      };\r\n    },\r\n    toBottom() {\r\n      window.scrollTo({\r\n        top: MAX_SCROLL_VALUE,\r\n        behavior: \"auto\",\r\n      });\r\n    },\r\n    toBottomSmooth() {\r\n      window.scrollTo({\r\n        top: MAX_SCROLL_VALUE,\r\n        behavior: \"smooth\",\r\n      });\r\n    },\r\n    focus(event) {\r\n      event\r\n      this.toBottomSmooth();\r\n    },\r\n    enter() {\r\n      this.sendMessage();\r\n      this.toBottomSmooth();\r\n    },\r\n    update() {\r\n      // this.toBottomSmooth();\r\n    },\r\n    click() {\r\n      this.toBottomSmooth();\r\n    },\r\n    more() {\r\n      Toast(\"待开发,目前仅支持发送单行文字消息\");\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initMessage(this.access);\r\n    this.relation = this.getRelation(this.access);\r\n    this.toBottom();\r\n    this.unReadCount = this.getUnReadCount(this.access);\r\n  },\r\n  updated() {\r\n    this.toBottomSmooth();\r\n  },\r\n\r\n  beforeUnmount() {\r\n    this.messageRead(this.access);\r\n    this.updateActiveList(this.access);\r\n  },\r\n  components: {\r\n    MessageContainer,\r\n  },\r\n};\r\n</script>\r\n\r\n<style >\r\n:root {\r\n  --van-field-label-width: 20px;\r\n  --van-field-label-margin-right: 10px;\r\n}\r\n.chat {\r\n  /* overflow-y: scroll;\r\n  scroll-behavior: smooth; */\r\n  font-size: 20px;\r\n}\r\n\r\n.chat .main {\r\n  padding-top: 10vh;\r\n  padding-bottom: 15vh;\r\n}\r\n\r\n.chat .input-message-item {\r\n  position: fixed;\r\n  bottom: 0;\r\n  box-shadow: 0px 5px 10px #aaa;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.chat .input-message-item .send-message-button {\r\n  color: #333;\r\n  box-shadow: rgb(100 101 102 / 12%) 0px 1px 1px 0px;\r\n  border: none;\r\n  padding: 0 4vw;\r\n  background: #fff;\r\n  overflow: hidden;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.chat .input-message-item .send-message-button:focus {\r\n  box-shadow: rgb(100 101 102 / 12%) 0px 2px 12px 0px;\r\n  border: 2px #999 solid;\r\n}\r\n\r\n.chat .input-message-item .van-field__body {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.chat .input-message-item .van-field__body input:focus {\r\n  border: 1px #999 solid;\r\n}\r\n.chat .input-message-item .van-field__body input {\r\n  background: hsla(0, 0%, 100%) !important;\r\n  backdrop-filter: none !important;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-indent: 0.6em;\r\n  font-size: 16px;\r\n}\r\n.chat .input-message-item .more-message-button,\r\n.chat .input-message-item .send-message-button,\r\n.chat .input-message-item .van-field__body input {\r\n  border: 1px #ccc solid;\r\n  border-radius: 7px;\r\n  height: 2.2rem;\r\n  line-height: 2.2rem;\r\n  font-size: 14px;\r\n}\r\n\r\n.chat .input-message-item button.more-message-button {\r\n  padding: none;\r\n  margin-left: -15px;\r\n  box-shadow: none;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: #fff;\r\n  border: none;\r\n  color: #eee;\r\n}\r\n.chat .input-message-item button.more-message-button svg {\r\n  height: 2rem;\r\n  width: 2rem;\r\n}\r\n</style>","<template>\r\n  <div class=\"message-container\">\r\n    <div class=\"time\">\r\n      {{ getMessageTime(access, message.index) }}\r\n    </div>\r\n    <div class=\"wrapper-message\">\r\n      <div class=\"name\" :class=\"{ right: message.isMine }\">\r\n        <div class=\"text\">\r\n          {{ message.isMine ? \"我\" : message.name }}\r\n        </div>\r\n      </div>\r\n      <div :class=\"{ isMine: message.isMine }\" class=\"wrapper-content\">\r\n        <div class=\"message-avatar\" v-if=\"!message.isMine\">\r\n          <avatar size=\"36px\" :avatarLink=\"getAvatar(message.senderKey)\" />\r\n        </div>\r\n        <div class=\"content\">\r\n          {{ message.content }}\r\n        </div>\r\n        <div class=\"message-avatar\" v-if=\"message.isMine\">\r\n          <avatar size=\"36px\" :avatarLink=\"getAvatar(message.senderKey)\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <br />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState, mapActions } from \"vuex\";\r\nimport Avatar from \"../../../components/items/Avatar.vue\";\r\n\r\nexport default {\r\n  computed: {\r\n    ...mapState({\r\n      access: (state) => state.current.access,\r\n    }),\r\n    ...mapGetters([\r\n      \"getRelation\",\r\n      \"getMessage\",\r\n      \"getProfile\",\r\n      \"getMessageTime\",\r\n      \"getAvatar\",\r\n    ]),\r\n  },\r\n  methods: {\r\n    ...mapActions([\"initProfile\", \"commitMessage\"]),\r\n  },\r\n  props: {\r\n    message: {\r\n      type: Object,\r\n      default: () => {\r\n        return {\r\n          id: -1,\r\n          state: 0,\r\n          messageId: -1,\r\n          type: 0,\r\n          name: \"\",\r\n          isMine: false,\r\n          content: \"\",\r\n          url: \"\",\r\n          key: {\r\n            id: \"\",\r\n            type: \"\",\r\n          },\r\n          index: 0,\r\n        };\r\n      },\r\n    },\r\n  },\r\n  mounted() {\r\n  },\r\n  components: {\r\n    Avatar,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.message-container {\r\n  font-size: 14px;\r\n  padding: 0 10px;\r\n}\r\n\r\n.time {\r\n  display: flex;\r\n  justify-content: center;\r\n  text-align: center;\r\n}\r\n\r\n.name {\r\n  font-size: 12px;\r\n  color: #333;\r\n}\r\n.name .text {\r\n  width: 48px;\r\n  text-align: center;\r\n}\r\n\r\n.wrapper-message {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.wrapper-message .name {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  width: 100%;\r\n}\r\n.wrapper-message .name.right {\r\n  justify-content: flex-end;\r\n}\r\n\r\n.wrapper-content {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  color: #fff;\r\n}\r\n\r\n.content {\r\n  max-width: 75%;\r\n  padding: 10px;\r\n  background: linear-gradient(-180deg, #265583 0%, #929ead 98%),\r\n    radial-gradient(\r\n      at top left,\r\n      rgba(255, 255, 255, 0.3) 0%,\r\n      rgba(0, 0, 0, 0.3) 100%\r\n    );\r\n  background-blend-mode: screen;\r\n  border-radius: 1em;\r\n  word-break: break-word;\r\n}\r\n\r\n.isMine {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: flex-end;\r\n  align-items: flex-start;\r\n}\r\n.isMine .content {\r\n  background-image: linear-gradient(60deg, #2af598 -40%, #009efd 100%);\r\n}\r\n</style>","import { render } from \"./MessageContainer.vue?vue&type=template&id=2c07308e&scoped=true\"\nimport script from \"./MessageContainer.vue?vue&type=script&lang=js\"\nexport * from \"./MessageContainer.vue?vue&type=script&lang=js\"\n\nimport \"./MessageContainer.vue?vue&type=style&index=0&id=2c07308e&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-2c07308e\"\n\nexport default script","import { render } from \"./Chat.vue?vue&type=template&id=1dda6cc0\"\nimport script from \"./Chat.vue?vue&type=script&lang=js\"\nexport * from \"./Chat.vue?vue&type=script&lang=js\"\n\nimport \"./Chat.vue?vue&type=style&index=0&id=1dda6cc0&lang=css\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}
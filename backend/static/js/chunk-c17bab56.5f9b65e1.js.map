{"version":3,"sources":["webpack:///./src/views/relation/Relation.vue","webpack:///./src/views/relation/Relation.vue?64d6","webpack:///./src/components/search/Search.vue","webpack:///./src/components/search/Search.vue?8ae3","webpack:///./src/components/items/Avatar.vue?dee4","webpack:///./src/views/relation/Relation.vue?d507","webpack:///./src/components/items/Avatar.vue","webpack:///./src/components/items/Avatar.vue?8b51","webpack:///./src/components/search/Search.vue?a8f0"],"names":["class","title","is-link","value","click","active","color","map","item","index","remark","key","toExhibt","icon","size","avatarLink","getAvatar","type","TYPE","FRIEND","GROUP","name","setup","computed","state","relation","access","current","methods","this","setAccess","initProfile","$router","push","beforeRouteEnter","localStorage","getItem","mounted","initRelation","components","Search","Avatar","render","shape","show-action","placeholder","searchOption","optionValue","text","focus","blur","left","show","showPopover","theme","actions","onSelect","placement","reference","action","onSearch","closeSearch","result","users","length","nickName","account","groups","ownId","showResult","searchFocus","QUERY_TYPE","KEY_WORD","ACCOUNT","LOCAL","console","log","openSearch","query","then","res","JSON","stringify","id","round","width","height","src","props","String","default","__scopeId"],"mappings":"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","file":"js/chunk-c17bab56.5f9b65e1.js","sourcesContent":["<template>\r\n  <div class=\"relation\">\r\n    <search></search>\r\n    <van-cell title=\"系统公告\" is-link value=\"内容\" @click=\"click\" />\r\n    <van-cell title=\"通知消息\" is-link value=\"内容\" @click=\"click\" />\r\n    <van-tabs v-model:active=\"active\" color=\"#1989fa\">\r\n      <van-tab title=\"好友\">\r\n        <van-cell\r\n          v-for=\"(item, index) in map\"\r\n          :title=\"item[1].remark\"\r\n          v-show=\"item[1].type == TYPE.FRIEND\"\r\n          :key=\"index\"\r\n          @click=\"toExhibt(item[0])\"\r\n        >\r\n          <template #icon>\r\n            <avatar size=\"3rem\" :avatarLink=\"getAvatar(item[0])\" />\r\n          </template>\r\n        </van-cell>\r\n      </van-tab>\r\n      <van-tab title=\"群组\">\r\n        <van-cell\r\n          v-for=\"(item, index) in map\"\r\n          :title=\"item[1].remark\"\r\n          v-show=\"item[1].type == TYPE.GROUP\"\r\n          :key=\"index\"\r\n          @click=\"toExhibt(item[0])\"\r\n        ></van-cell>\r\n      </van-tab>\r\n    </van-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { mapState, mapActions, mapGetters, mapMutations } from \"vuex\";\r\nimport { Toast } from \"vant\";\r\nimport { RELATION, TOKEN_NAME } from \"common/config\";\r\nimport Avatar from \"../../components/items/Avatar.vue\";\r\nimport Search from \"components/search/Search\";\r\n\r\nexport default {\r\n  name: \"relation\",\r\n  setup() {\r\n    const value = ref(\"\");\r\n    const active = ref(2);\r\n    const TYPE = RELATION.TYPE;\r\n    return { value, active, TYPE };\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      map: (state) => state.relation.map,\r\n      access: (state) => state.current.access,\r\n    }),\r\n    ...mapGetters([\"getProfile\", \"getAvatar\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions([\"initProfile\", \"initRelation\"]),\r\n    ...mapMutations([\"setAccess\"]),\r\n    toExhibt(item) {\r\n      this.setAccess(item);\r\n      this.initProfile(item);\r\n      this.$router.push(\"/exhibt\");\r\n    },\r\n    click() {\r\n      Toast(\"系统公告和通知消息，待开发\");\r\n    },\r\n  },\r\n  beforeRouteEnter() {\r\n    if (!localStorage.getItem(TOKEN_NAME)) {\r\n      return false;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initRelation();\r\n  },\r\n  components: {\r\n    Search,\r\n    Avatar,\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.relation {\r\n  padding-bottom: 50px;\r\n}\r\n.relation .van-tabs .van-cell__title {\r\n  display: flex !important;\r\n  align-items: center !important;\r\n  padding-left: 10px;\r\n}\r\n</style>","import { render } from \"./Relation.vue?vue&type=template&id=0ba60c69\"\nimport script from \"./Relation.vue?vue&type=script&lang=js\"\nexport * from \"./Relation.vue?vue&type=script&lang=js\"\n\nimport \"./Relation.vue?vue&type=style&index=0&id=0ba60c69&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"search\">\r\n    <van-search\r\n      v-model=\"value\"\r\n      shape=\"round\"\r\n      show-action\r\n      :placeholder=\"searchOption[optionValue].text + '搜索'\"\r\n      @focus=\"focus()\"\r\n      @blur=\"blur()\"\r\n    >\r\n      <template #left>\r\n        <van-popover\r\n          v-model:show=\"showPopover\"\r\n          theme=\"dark\"\r\n          :actions=\"searchOption\"\r\n          @select=\"onSelect\"\r\n          placement=\"bottom-start\"\r\n        >\r\n          <template #reference>\r\n            <button type=\"primary\" class=\"search-button\">选项</button>\r\n          </template>\r\n        </van-popover>\r\n      </template>\r\n      <template #action>\r\n        <button @click=\"onSearch\" class=\"search-button\">搜索</button>\r\n      </template>\r\n    </van-search>\r\n    <div class=\"search-result\" v-show=\"searchFocus\" @click=\"closeSearch()\">\r\n      <div class=\"results\" v-show=\"showResult\">\r\n        <van-cell-group\r\n          title=\"用户\"\r\n          v-if=\"result.users && result.users.length > 0\"\r\n        >\r\n          <van-cell\r\n            :title=\"item.nickName\"\r\n            :value=\"item.account\"\r\n            v-for=\"(item, index) in result.users\"\r\n            :key=\"index\"\r\n            @click.stop=\"toExhibt(item)\"\r\n          />\r\n        </van-cell-group>\r\n        <van-cell-group\r\n          title=\"群组\"\r\n          v-if=\"result.groups && result.groups.length > 0\"\r\n        >\r\n          <van-cell\r\n            :title=\"item.name\"\r\n            :value=\"item.ownId\"\r\n            v-for=\"(item, index) in result.groups\"\r\n            :key=\"index\"\r\n            @click.stop=\"toExhibt(item)\"\r\n          />\r\n        </van-cell-group>\r\n      </div>\r\n      <div class=\"close-tips\">(点击空白处退出搜索)</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport { mapMutations } from \"vuex\";\r\n\r\nimport { Toast } from \"vant\";\r\nimport { GROUP_TYPE, USER_TYPE } from \"../../common/config\";\r\n\r\nimport { queryByKeyWord } from \"../../service/http/query\";\r\n\r\nconst QUERY_TYPE = {\r\n  KEY_WORD: 0,\r\n  ACCOUNT: 1,\r\n  GROUP: 2,\r\n  LOCAL: 3,\r\n};\r\n\r\nexport default {\r\n  setup() {\r\n    const showPopover = ref(false);\r\n    const value = ref(\"\");\r\n    const result = ref(\"\");\r\n    const searchFocus = ref(false);\r\n    const showResult = ref(false);\r\n    const optionValue = ref(QUERY_TYPE.KEY_WORD);\r\n    const searchOption = [\r\n      { text: \"关键字\", value: QUERY_TYPE.KEY_WORD },\r\n      { text: \"账户\", value: QUERY_TYPE.ACCOUNT },\r\n      { text: \"群组\", value: QUERY_TYPE.GROUP },\r\n      { text: \"本地\", value: QUERY_TYPE.LOCAL },\r\n    ];\r\n\r\n    return {\r\n      showPopover,\r\n      value,\r\n      result,\r\n      searchFocus,\r\n      optionValue,\r\n      searchOption,\r\n      showResult,\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapMutations([\"setAccess\"]),\r\n    onSelect(action, index) {\r\n      this.optionValue = this.searchOption[index].value;\r\n    },\r\n    onSearch() {\r\n      console.log(\"search\");\r\n      this.openSearch();\r\n      switch (this.optionValue) {\r\n        case QUERY_TYPE.KEY_WORD:\r\n          queryByKeyWord(this.value).then((res) => {\r\n            this.result = res;\r\n            this.showResult = true;\r\n          });\r\n          break;\r\n        case QUERY_TYPE.ACCOUNT:\r\n          Toast(\"功能待完成\");\r\n          break;\r\n        case QUERY_TYPE.GROUP:\r\n          Toast(\"功能待完成\");\r\n          break;\r\n        case QUERY_TYPE.LOCAL:\r\n          Toast(\"功能待完成\");\r\n          break;\r\n      }\r\n    },\r\n    focus() {\r\n      this.openSearch();\r\n    },\r\n    blur() {\r\n      this.closeSearch();\r\n    },\r\n    openSearch() {\r\n      console.log(\"open\");\r\n      this.searchFocus = true;\r\n    },\r\n    closeSearch() {\r\n      console.log(\"close\");\r\n      this.searchFocus = false;\r\n    },\r\n    toExhibt(item) {\r\n      const key = JSON.stringify({\r\n        id: item.id,\r\n        type: item.ownId ? GROUP_TYPE : USER_TYPE,\r\n      });\r\n      this.setAccess(key);\r\n      this.$router.push(\"/exhibt\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style >\r\n.search-button {\r\n  border-radius: 50px;\r\n  height: 34px ;\r\n  padding: 0 2vw;\r\n}\r\n\r\n.search-button {\r\n  color: rgb(50, 50, 51);\r\n  box-shadow: rgba(100, 101, 102, 0.12) 0px 2px 12px 0px;\r\n  border: none;\r\n  padding: 0 4vw;\r\n  background: #fff;\r\n  overflow: hidden;\r\n  font-size: 14px;\r\n}\r\n.search-button:active,\r\n.search-button:focus {\r\n  background: #fff;\r\n  color: rgb(25, 137, 250);\r\n}\r\n\r\n.search-result {\r\n  position: fixed;\r\n  top: 68px;\r\n  height: 100vh;\r\n  width: 100vw;\r\n  background: #fff;\r\n  z-index: 2;\r\n}\r\n\r\n.search .search-result .close-tips {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 5vh 0;\r\n  color: #999;\r\n}\r\n</style>","import { render } from \"./Search.vue?vue&type=template&id=3b8500fb\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=3b8500fb&lang=css\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Avatar.vue?vue&type=style&index=0&id=77e4a452&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Relation.vue?vue&type=style&index=0&id=0ba60c69&lang=css\"","<template>\r\n  <van-image round :width=\"size\" :height=\"size\" :src=\"avatarLink\" />\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    avatarLink: {\r\n      type: String,\r\n      default: require(\"assets/default/avatar.jpg\"),\r\n    },\r\n    size: {\r\n      type: String,\r\n      default: \"80\",\r\n    },\r\n  },\r\n  mounted() {\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.avatar {\r\n  position: relative;\r\n  margin: 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n</style>","import { render } from \"./Avatar.vue?vue&type=template&id=77e4a452&scoped=true\"\nimport script from \"./Avatar.vue?vue&type=script&lang=js\"\nexport * from \"./Avatar.vue?vue&type=script&lang=js\"\n\nimport \"./Avatar.vue?vue&type=style&index=0&id=77e4a452&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-77e4a452\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Search.vue?vue&type=style&index=0&id=3b8500fb&lang=css\""],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d1539c0"],{"0944":function(t,e,c){"use strict";c.r(e);var n=c("7a23"),a={class:"message"};function o(t,e,o,i,r,s){var u=Object(n["J"])("search"),l=Object(n["J"])("van-empty"),b=Object(n["J"])("avatar"),O=Object(n["J"])("van-badge"),j=Object(n["J"])("van-cell");return Object(n["C"])(),Object(n["i"])("div",a,[Object(n["m"])(u),0==t.activeList.length?(Object(n["C"])(),Object(n["g"])(l,{key:0,description:"没有消息",image:c("7e89")},null,8,["image"])):Object(n["h"])("",!0),(Object(n["C"])(!0),Object(n["i"])(n["a"],null,Object(n["I"])(t.activeList,(function(e,c){return Object(n["C"])(),Object(n["g"])(j,{key:c,title:s.getName(e),label:s.getString(e),onClick:function(t){return s.toChat(e)}},{icon:Object(n["R"])((function(){return[Object(n["m"])(b,{size:"3rem",avatarLink:t.getAvatar(e)},null,8,["avatarLink"])]})),value:Object(n["R"])((function(){return[t.getUnReadCount(e)>0?(Object(n["C"])(),Object(n["g"])(O,{key:0,content:t.getUnReadCount(e),max:"99"},null,8,["content"])):Object(n["h"])("",!0)]})),_:2},1032,["title","label","onClick"])})),128))])}var i=c("5530"),r=(c("d81d"),c("2d90")),s=c("5502"),u=c("7e7f"),l=c("44d7");l["a"].initWebSocket();var b={name:"message",computed:Object(i["a"])(Object(i["a"])({},Object(s["e"])({activeList:function(t){return t.message.activeList},rmap:function(t){return t.relation.map},mmap:function(t){return t.message.map}})),Object(s["c"])(["getLatestMessage","getRelation","getUnReadCount","getProfile","getAvatar"])),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["b"])(["initProfile","initRelation"])),Object(s["d"])(["setAccess"])),{},{toChat:function(t){this.setAccess(t),this.$router.push("/chat")},getName:function(t){var e=this.rmap?this.getRelation(t):"";if(e)return e.remark;this.initRelation()},getString:function(t){var e=this.getLatestMessage(t);if(e){var c=e.main.content;return c.length>10?c.substring(0,10)+"......":c}return""}}),mounted:function(){!(this.rmap.size>0)&&this.initRelation()},components:{Search:r["a"],Avatar:u["a"]}};c("483b");b.render=o;e["default"]=b},"1cbf":function(t,e,c){},2781:function(t,e,c){},"2d90":function(t,e,c){"use strict";c("b0c0");var n=c("7a23"),a={class:"search"},o=Object(n["j"])("button",{type:"primary",class:"search-button"},"选项",-1),i={class:"results"},r=Object(n["j"])("div",{class:"close-tips"},"(点击空白处退出搜索)",-1);function s(t,e,c,s,u,l){var b=Object(n["J"])("van-popover"),O=Object(n["J"])("van-search"),j=Object(n["J"])("van-cell"),h=Object(n["J"])("van-cell-group");return Object(n["C"])(),Object(n["i"])("div",a,[Object(n["m"])(O,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=function(t){return s.value=t}),shape:"round","show-action":"",placeholder:s.searchOption[s.optionValue].text+"搜索",onFocus:e[3]||(e[3]=function(t){return l.focus()}),onBlur:e[4]||(e[4]=function(t){return l.blur()})},{left:Object(n["R"])((function(){return[Object(n["m"])(b,{show:s.showPopover,"onUpdate:show":e[0]||(e[0]=function(t){return s.showPopover=t}),theme:"dark",actions:s.searchOption,onSelect:l.onSelect,placement:"bottom-start"},{reference:Object(n["R"])((function(){return[o]})),_:1},8,["show","actions","onSelect"])]})),action:Object(n["R"])((function(){return[Object(n["j"])("button",{onClick:e[1]||(e[1]=function(){return l.onSearch&&l.onSearch.apply(l,arguments)}),class:"search-button"},"搜索")]})),_:1},8,["modelValue","placeholder"]),Object(n["S"])(Object(n["j"])("div",{class:"search-result",onClick:e[5]||(e[5]=function(t){return l.closeSearch()})},[Object(n["S"])(Object(n["j"])("div",i,[s.result.users&&s.result.users.length>0?(Object(n["C"])(),Object(n["g"])(h,{key:0,title:"用户"},{default:Object(n["R"])((function(){return[(Object(n["C"])(!0),Object(n["i"])(n["a"],null,Object(n["I"])(s.result.users,(function(t,e){return Object(n["C"])(),Object(n["g"])(j,{title:t.nickName,value:t.account,key:e,onClick:Object(n["U"])((function(e){return l.toExhibt(t)}),["stop"])},null,8,["title","value","onClick"])})),128))]})),_:1})):Object(n["h"])("",!0),s.result.groups&&s.result.groups.length>0?(Object(n["C"])(),Object(n["g"])(h,{key:1,title:"群组"},{default:Object(n["R"])((function(){return[(Object(n["C"])(!0),Object(n["i"])(n["a"],null,Object(n["I"])(s.result.groups,(function(t,e){return Object(n["C"])(),Object(n["g"])(j,{title:t.name,value:t.ownId,key:e,onClick:Object(n["U"])((function(e){return l.toExhibt(t)}),["stop"])},null,8,["title","value","onClick"])})),128))]})),_:1})):Object(n["h"])("",!0)],512),[[n["P"],s.showResult]]),r],512),[[n["P"],s.searchFocus]])])}var u=c("5530"),l=c("5502"),b=c("626a"),O=c("a49b"),j=c("6b08"),h={KEY_WORD:0,ACCOUNT:1,GROUP:2,LOCAL:3},f={setup:function(){var t=Object(n["H"])(!1),e=Object(n["H"])(""),c=Object(n["H"])(""),a=Object(n["H"])(!1),o=Object(n["H"])(!1),i=Object(n["H"])(h.KEY_WORD),r=[{text:"关键字",value:h.KEY_WORD},{text:"账户",value:h.ACCOUNT},{text:"群组",value:h.GROUP},{text:"本地",value:h.LOCAL}];return{showPopover:t,value:e,result:c,searchFocus:a,optionValue:i,searchOption:r,showResult:o}},methods:Object(u["a"])(Object(u["a"])({},Object(l["d"])(["setAccess"])),{},{onSelect:function(t,e){this.optionValue=this.searchOption[e].value},onSearch:function(){var t=this;switch(console.log("search"),this.openSearch(),this.optionValue){case h.KEY_WORD:Object(j["c"])(this.value).then((function(e){t.result=e,t.showResult=!0}));break;case h.ACCOUNT:Object(b["a"])("功能待完成");break;case h.GROUP:Object(b["a"])("功能待完成");break;case h.LOCAL:Object(b["a"])("功能待完成");break}},focus:function(){this.openSearch()},blur:function(){this.closeSearch()},openSearch:function(){console.log("open"),this.searchFocus=!0},closeSearch:function(){console.log("close"),this.searchFocus=!1},toExhibt:function(t){var e=JSON.stringify({id:t.id,type:t.ownId?O["a"]:O["j"]});this.setAccess(e),this.$router.push("/exhibt")}})};c("d2dd");f.render=s;e["a"]=f},"483b":function(t,e,c){"use strict";c("4989")},4989:function(t,e,c){},4991:function(t,e,c){"use strict";c("2781")},"7e7f":function(t,e,c){"use strict";var n=c("7a23");function a(t,e,c,a,o,i){var r=Object(n["J"])("van-image");return Object(n["C"])(),Object(n["g"])(r,{round:"",width:c.size,height:c.size,src:c.avatarLink},null,8,["width","height","src"])}var o={props:{avatarLink:{type:String,default:c("f42b")},size:{type:String,default:"80"}},mounted:function(){}};c("4991");o.render=a,o.__scopeId="data-v-77e4a452";e["a"]=o},"7e89":function(t,e,c){t.exports=c.p+"img/empty-image.0bc9958e.png"},d2dd:function(t,e,c){"use strict";c("1cbf")}}]);
//# sourceMappingURL=chunk-3d1539c0.aa36994c.js.map
(function(e){function t(t){for(var a,s,i=t[0],c=t[1],o=t[2],l=0,m=[];l<i.length;l++)s=i[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(m.length)m.shift()();return u.push.apply(u,o||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],a=!0,s=1;s<n.length;s++){var i=n[s];0!==r[i]&&(a=!1)}a&&(u.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},s={app:0},r={app:0},u=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-04f73097":"4710cf41","chunk-10a167e8":"40eb70c2","chunk-20a683e3":"6db3501f","chunk-3d1539c0":"aa36994c","chunk-6d993b63":"d369362d","chunk-73b8da90":"0933b1af","chunk-8e55520a":"2aa34752","chunk-c17bab56":"5f9b65e1","chunk-e2d5e89c":"38b54c41"}[e]+".js"}function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-04f73097":1,"chunk-10a167e8":1,"chunk-20a683e3":1,"chunk-3d1539c0":1,"chunk-73b8da90":1,"chunk-8e55520a":1,"chunk-c17bab56":1,"chunk-e2d5e89c":1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-04f73097":"2265654c","chunk-10a167e8":"073510ae","chunk-20a683e3":"0796a2f3","chunk-3d1539c0":"2918624f","chunk-6d993b63":"31d6cfe0","chunk-73b8da90":"2d766b48","chunk-8e55520a":"c10fee2f","chunk-c17bab56":"d5d19a77","chunk-e2d5e89c":"2913a564"}[e]+".css",r=c.p+a,u=document.getElementsByTagName("link"),i=0;i<u.length;i++){var o=u[i],l=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(l===a||l===r))return t()}var m=document.getElementsByTagName("style");for(i=0;i<m.length;i++){o=m[i],l=o.getAttribute("data-href");if(l===a||l===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||r,u=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=a,delete s[e],d.parentNode.removeChild(d),n(u)},d.href=r;var g=document.getElementsByTagName("head")[0];g.appendChild(d)})).then((function(){s[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var u=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=u);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e);var m=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;m.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",m.name="ChunkLoadError",m.type=a,m.request=s,n[1](m)}r[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var m=0;m<o.length;m++)t(o[m]);var d=l;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"343a":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return d}));n("d3b7");var a=n("a49b"),s=n("d6e4");function r(e){var t={next:!1,type:"warning",message:"未开始检查status"},n=e.status;switch(!0){case 200==n:t.next=!0,t.type="success",t.message="正确的http状态码";break;case 400==n:t.next=!1,t.type="danger",t.message="错误的请求";break;case 401==n:t.next=!0,t.type="warning",t.message="401";break;case 403==n:t.next=!1,t.type="warning",t.message="没有权限";break;case 404==n:t.next=!1,t.type="fail",t.message="404";break;case n>=400&&n<500:t.next=!0,t.type="fail",t.message="请求错误";break;case n>=500&&n<=505:t.next=!1,t.type="error",t.message="服务器错误";break;default:t.next=!1,t.type="fail",t.message="其他问题"}return t.next||Object(s["a"])(t),t}var u=n("621f"),i="http://",c="/api",o=i+a["b"]+c;function l(e,t){return fetch(o+e.url,{method:"post",body:JSON.stringify(t),headers:new Headers({"Content-Type":"application/json",token:localStorage.getItem("token")})}).then((function(e){return r(e).next?e.json():null})).then((function(e){return e.code.value>u["d"].safe.value&&e.code.value<=u["d"].max?(Object(s["a"])(e.code),!1):e})).catch((function(){Object(s["a"])({type:"danger",message:a["f"]})}))}function m(e,t){return fetch(o+e.url+"/"+t,{method:"get",headers:new Headers({token:localStorage.getItem("token")})}).then((function(e){return r(e).next?e.json():null})).then((function(e){return e.code.value>u["d"].safe.value&&e.code.value<=u["d"].max?(Object(s["a"])(e.code),!1):e})).catch((function(){Object(s["a"])({type:"danger",message:a["f"]})}))}function d(e,t){return fetch(o+e.url,{method:"post",body:t,headers:new Headers({token:localStorage.getItem("token")})}).then((function(e){return r(e).next?e.json():null})).then((function(e){return e.code.value>u["d"].safe.value&&e.code.value<=u["d"].max?(Object(s["a"])(e.code),!1):e})).catch((function(){Object(s["a"])({type:"danger",message:a["f"]})}))}},4360:function(e,t,n){"use strict";var a=n("5502"),s=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("a49b")),r=n("6b08"),u=n("343a"),i=n("621f"),c=n("d6e4");function o(e){return"/relation"+e}function l(e){return Object(u["b"])({url:o("/update")},e).then((function(e){return Object(c["a"])(e.code),e.code.value!=i["a"].relation.update.success.value}))}var m={state:function(){return{map:new Map}},getters:{getRelation:function(e){return function(t){return e.map.get(t)}}},mutations:{initRelation:function(e,t){e.map=t},setRelation:function(e,t){var n=t.key;e.map.set(n,t.relation)}},actions:{initRelation:function(e,t){var n=e.commit;(0==R.state.relation.map.size||t)&&Object(r["a"])().then((function(e){var t=new Map;e.data&&e.data.map((function(e){var n=JSON.stringify({id:e.contactId,type:e.type<=s["g"].TYPE.FRIEND?s["j"]:s["a"]});R.dispatch("initProfile",n),t.set(n,e)})),n("initRelation",t)}))},setRelation:function(e,t){var n=e.commit,a=t.relation;l(a).then((function(e){e&&n("setRelation",t)}))}}},d=m,g={state:function(){return{user:null,access:null,security:null,privacy:null}},getters:{},mutations:{setAccess:function(e,t){e.access=t},user:function(e,t){e.user=t}},actions:{}},f=g,p=(n("fb6a"),n("6062"),n("a434"),n("44d7")),y=6e4,v={state:function(){return{activeList:[],map:new Map,indexMap:new Map,systemMessages:[],systemUnReadCount:0,notifyMessage:[],notifyUnReadCount:0,unReadTotal:0}},getters:{getLatestMessage:function(e){return function(t){return e.map.get(t).messages.slice(-1)[0]}},getUnReadCount:function(e){return function(t){if(!t)return t;var n=e.map.get(t);return n?n.unReadCount:0}},getSystemMessage:function(e){return e.systemMessages},getMessage:function(e){return function(t){if(!t)return t;var n=e.map.get(t);return n?n.messages:[]}},getMessageTime:function(e){return function(t,n){if(!t)return t;var a=e.map.get(t);if(a){if(!(n>0)){var s=new Date(a.messages[n].createdAt).toLocaleString();return s}if(a.messages[n].createdAt-a.messages[n-1].createdAt>y){var r=new Date(a.messages[n].createdAt).toLocaleString();return r}}}}},mutations:{initMessage:function(e,t){if(!e.map.get(t)){var n={messages:[],historyCount:0,unReadCount:0,localEditMessage:null};e.map.set(t,n)}},newMessage:function(e,t){var n=t.key,a=t.message,s=e.map.get(n);e.indexMap.set(a.messageId,s.messages.length-s.historyCount),s.messages.push(a),e.unReadTotal++,s.unReadCount++,e.map.set(n,s)},revokeMessage:function(e,t){var n=t.key,a=t.message,s=e.indexMap.get(a.messageId)+r.historyCount,r=e.map.get(n);r.messages[s]=a,e.unReadTotal++,r.unReadCount++},myMessage:function(e,t){var n=t.key,a=t.message,s=e.map.get(n);e.indexMap.set(a.messageId,s.messages.length-s.historyCount),s.messages.push(a),e.map.set(n,s)},historyMessage:function(e,t){var n=t.key,a=t.message,s=e.map.get(n);s.messages.unshift(a),s.historyCount++,e.map.set(n,s)},updateActiveList:function(e,t){e.activeList.unshift(t);for(var n=new Set,a=0;a<e.activeList.length;++a){if(n.has(e.activeList[a])){e.activeList.splice(a,1);break}n.add(e.activeList[a])}},newSystemMessage:function(e,t){e.systemMessages.push(t),e.systemUnReadCount++},newNotifyMessage:function(e,t){e.notifyMessage.push(t),e.notifyUnReadCount++},localEditMessage:function(e,t){console.log("curmessage",t);var n=t.key,a=e.map.get(n);a.localEditMessage=t.message,e.map.set(n,a)},localEditMessageState:function(e,t){var n=t.key,a=e.map.get(n);a.localEditMessage.state=t.state,a.localEditMessage.messageId=t.id,e.indexMap.set(t.id,a.messages.length-a.historyCount),a.messages.push(a.localEditMessage),a.localEditMessage=null,e.indexMap.set(n,a)},messageRead:function(e,t){var n=e.map.get(t);e.unReadTotal-=n.unReadCount,n.unReadCount=0,e.map.set(t,n)}},actions:{initMessage:function(e,t){var n=e.commit;n("initMessage",t)},commitMessage:function(e,t){var n=e.commit;p["a"].wsSend(s["k"].SEND_MESSAGE,t.message.main),n("localEditMessage",{key:t.key,message:t.message})}}},h=v,b=n("516c");s["c"];var E=n("f42b"),O=n("43b5"),S={state:function(){return{map:new Map}},getters:{getProfile:function(e){return function(t){return t?e.map.get(t):null}},getAvatar:function(e){return function(t){var n=e.map.get(t);return n&&n.avatar?n.avatar:E}},getBackImage:function(e){return function(t){var n=e.map.get(t);return n&&n.backImage?n.backImage:O}}},mutations:{profile:function(e,t){e.map.set(t.key,t.profile)}},actions:{initProfile:function(e,t){var n=e.commit;if(t&&!R.state.profile.map.get(t)){var a=JSON.parse(t),u=a.type,i=a.id;u==s["a"]?Object(r["b"])(i).then((function(e){e.data&&n("profile",{key:t,profile:e.data})})):Object(r["d"])(i).then((function(e){e.data&&n("profile",{key:t,profile:e.data})}))}},initUserProfile:function(e,t){var n=e.commit;R.state.current.profile&&!t||Object(b["a"])().then((function(e){if(e){var t=JSON.stringify({id:e.id,type:s["j"]});n("profile",{key:t,profile:e}),R.commit("user",t)}}))}}},w=S,k=Object(a["a"])({modules:{relation:d,current:f,message:h,profile:w}}),R=t["a"]=k},"43b5":function(e,t,n){e.exports=n.p+"img/background.bca28f96.jpg"},"44d7":function(e,t,n){"use strict";var a=n("3835"),s=n("1da1"),r=(n("96cf"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("4fad"),n("e439"),n("d81d"),n("a49b")),u={connectFlag:!0,timeout:200,timeoutObj:null,BASEURL:"ws://"+r["b"]+"/api",api:"/chat",token:null},i=u,c=n("4360"),o=n("d6e4"),l=n("621f");function m(e){return d.apply(this,arguments)}function d(){return d=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.next=3,Promise.all(t.map((function(e){n.push(e.messageId);var t=null,a=e.main;if(e=g(e),void 0==c["a"].state.message.indexMap.get(e.messageId)||e.state==r["e"].STATE.REVOKE)switch(a.sendType){case r["e"].SEND_TYPE.STRANGER_MESSAGE:case r["e"].SEND_TYPE.FRIEND_MESSAGE:t={id:a.sendId,type:r["j"]},e.senderKey=JSON.stringify(t),e.main.sendId==e.userId?(t={id:e.main.receiveId,type:r["j"]},e=f(e,r["e"].MY_REVOKE_REPLACE),p("myMessage",JSON.stringify(t),e)):(e=f(e,r["e"].RELATION_REVOKE_REPLACE),p("newMessage",JSON.stringify(t),e));break;case r["e"].SEND_TYPE.GROUP_MESSAGE:case r["e"].SEND_TYPE.GROUP_ALL_MESSAGE:t={id:a.receiveId,type:r["a"]},e.senderKey=JSON.stringify({id:a.sendId,type:r["j"]}),e.main.sendId==e.userId?(e=f(e,r["e"].MY_REVOKE_REPLACE),p("myMessage",JSON.stringify(t),e)):(e=f(e,r["e"].RELATION_REVOKE_REPLACE),p("newMessage",JSON.stringify(t),e));break;case r["e"].SEND_TYPE.SYSTEM_MESSAGE:e.senderKey={id:a.sendId,type:r["h"]},c["a"].commit("newSystemMessage",e);break;case r["e"].SEND_TYPE.SYSTEM_NOTIFY_MESSAGE:e.senderKey={id:a.sendId,type:r["h"]},c["a"].commit("newNotifyMessage",e);break;default:alert("什么鬼玩意")}})));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function g(e){return e.createdAt=Date.parse(e.createdAt),e.updatedAt=Date.parse(e.updatedAt),e}function f(e,t){return e.state==r["e"].STATE.REVOKE&&(e.main.content=t),e}function p(e,t,n){c["a"].commit("updateActiveList",t);var a=c["a"].getters.getMessage(t);!(a.length>0)&&c["a"].commit("initMessage",t),c["a"].commit(e,{key:t,message:n})}function y(e){e.key=JSON.stringify(e.key),c["a"].commit("localEditMessageState",e),c["a"].commit("updateActiveList",e.key)}r["k"];var v={$ws:null,api:null,connectFlag:null,timeout:null,timeoutObj:null,reconnectTimes:0,maxReconnectTimes:2,heartBeatPackage:null,token:null,BASEURL:null,initConfig:function(e){for(var t=this,n=new Set(["BASEURL","maxReconnectTimes","heartBeatPackage"]),s=0,r=Object.entries(i);s<r.length;s++){var u=Object(a["a"])(r[s],2),c=u[0],o=u[1],l=Object.getOwnPropertyDescriptor(t,c);void 0!=l&&1!=l.writable||Object.defineProperty(t,c,{value:e&&e[c]?e[c]:o,writable:!n.has(c)})}},initWebSocket:function(e){v.timeoutObj&&clearTimeout(v.timeoutObj),this.$ws&&this.resetHeartbeat(),this.initConfig(e),this.token=localStorage.getItem(r["i"]);var t=this.BASEURL+this.api;this.$ws=new WebSocket(t,"json"),this.$ws.onopen=this.wsOpen,this.$ws.onclose=this.wsClose,this.$ws.onmessage=this.wsMsg,this.$ws.onerror=this.wsError},wsOpen:function(){var e={type:"OPEN",token:v.token};this.send&&this.send(JSON.stringify(e)),v.startWsHeartbeat()},wsClose:function(){null!=this.close&&(this.close(),v.$ws=null)},wsMsg:function(e){var t=JSON.parse(e.data);if(t.code){var n=t.code.value;switch(!0){case n==l["a"].chat.open.sendMessage.value||n==l["a"].chat.message.heartBeat.value:m(t.data).then((function(e){e.length>0&&v.wsSend(r["k"].RECEVICE_MESSAGE,e)}));break;case n>=12210&&n<12220:y(t.data);break;case n>=12e3&&n<12399:break;default:Object(o["a"])(t.code),v.closeHeartBeat();break}}},wsError:function(){Object(o["a"])(l["a"].system.catchErr.wsConnectError),v.reconnect()},wsSend:function(e,t){this.connectFlag&&this.$ws&&this.$ws.send&&this.$ws.readyState==this.$ws.OPEN&&this.$ws.send(JSON.stringify({type:e,token:this.token,data:t}))},reconnect:function(){this.connectFlag&&this.reconnectTimes-this.maxReconnectTimes<0?(this.reconnectTimes++,this.initWebSocket()):(this.closeHeartBeat(),Object(o["a"])({type:"danger",message:"重连失败"}),this.wsClose())},startWsHeartbeat:function(){var e=this;e.timeoutObj&&clearTimeout(e.timeoutObj),e.timeoutObj=setInterval((function(){e.connectFlag?(e.$ws&&e.$ws.readyState!=e.$ws.OPEN&&e.reconnect(),e.$ws&&e.$ws.send(JSON.stringify({type:"HEARTBEAT",token:e.token}))):e.closeHeartBeat()}),e.timeout)},resetHeartbeat:function(){this.$ws.readyState==this.$ws.OPEN&&(this.$ws.close(),this.$ws=null)},closeHeartBeat:function(){v.timeoutObj&&clearTimeout(v.timeoutObj),this.connectFlag=!1,this.wsClose()}};t["a"]=v},"516c":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var a=n("d6e4"),s=n("621f"),r=n("343a");function u(e){return"/account"+e}function i(){return Object(r["b"])({url:u("/query")}).then((function(e){if(e.code.value==s["a"].account.query.success.value)return e.data;Object(a["a"])(e.code)}))}function c(e){return Object(r["b"])({url:u("/update")},e).then((function(e){return Object(a["a"])(e.code),e.code.value==s["a"].account.update.success.value}))}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function s(e,t,n,s,r,u){var i=Object(a["J"])("router-view"),c=Object(a["J"])("tabbar");return Object(a["C"])(),Object(a["i"])(a["a"],null,[Object(a["m"])(i,null,{default:Object(a["R"])((function(e){var t=e.Component,n=e.route;return[(Object(a["C"])(),Object(a["g"])(a["b"],{include:"message,relation,space"},[(Object(a["C"])(),Object(a["g"])(Object(a["L"])(t),{key:n.meta.usePathKey?n.path:void 0}))],1024))]})),_:1}),e.$route.meta.main?(Object(a["C"])(),Object(a["g"])(c,{key:0})):Object(a["h"])("",!0)],64)}var r=n("5530"),u=n("5502"),i=Object(a["l"])("消息"),c=Object(a["l"])("瓜葛"),o=Object(a["l"])("空间"),l=Object(a["l"])("设置");function m(e,t,n,s,r,u){var m=Object(a["J"])("van-tabbar-item"),d=Object(a["J"])("van-tabbar");return Object(a["C"])(),Object(a["g"])(d,{modelValue:s.active,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.active=e}),"z-index":"9"},{default:Object(a["R"])((function(){return[Object(a["m"])(m,{icon:"chat",badge:u.getTotal(),to:"/message"},{default:Object(a["R"])((function(){return[i]})),_:1},8,["badge"]),Object(a["m"])(m,{icon:"friends",to:"/relation"},{default:Object(a["R"])((function(){return[c]})),_:1}),Object(a["m"])(m,{icon:"browsing-history",to:"/space"},{default:Object(a["R"])((function(){return[o]})),_:1}),Object(a["m"])(m,{icon:"setting",to:"/profile"},{default:Object(a["R"])((function(){return[l]})),_:1})]})),_:1},8,["modelValue"])}var d={setup:function(){var e=Object(a["H"])(-1);return{active:e}},computed:Object(r["a"])({},Object(u["e"])({total:function(e){return e.message.unReadTotal}})),methods:{getTotal:function(){return this.total>99?"99+":this.total>0?this.total:""}}};d.render=m;var g=d,f={name:"App",components:{Tabbar:g},methods:Object(r["a"])({},Object(u["b"])(["initRelation"])),mounted:function(){}};n("e97b");f.render=s;var p=f,y=n("1da1"),v=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("6062"),n("d6e4")),h=n("6c02"),b=n("a49b"),E=n("621f"),O=function(){return n.e("chunk-8e55520a").then(n.bind(null,"ebb2"))},S=function(){return n.e("chunk-3d1539c0").then(n.bind(null,"0944"))},w=function(){return n.e("chunk-c17bab56").then(n.bind(null,"2b20"))},k=function(){return n.e("chunk-6d993b63").then(n.bind(null,"834b"))},R=function(){return n.e("chunk-e2d5e89c").then(n.bind(null,"3b42"))},j=function(){return n.e("chunk-73b8da90").then(n.bind(null,"ba29"))},M=function(){return n.e("chunk-10a167e8").then(n.bind(null,"068c"))},A=function(){return n.e("chunk-20a683e3").then(n.bind(null,"ca20"))},_=function(){return n.e("chunk-04f73097").then(n.bind(null,"bbe4"))},x=[{path:"/",component:O},{path:"/login",component:O},{path:"/message",component:S,meta:{main:!0}},{path:"/relation",component:w,meta:{main:!0}},{path:"/space",component:k,meta:{main:!0}},{path:"/profile",component:R,meta:{main:!0,childRoute:!0},children:[{path:"user-info",component:j}]},{path:"/exhibt",component:M},{path:"/chat",component:A},{path:"/relation-config",component:_}],T=Object(h["a"])({history:Object(h["b"])(),routes:x}),N=new Set(["/login"]);T.beforeEach(function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!N.has(n.path)||localStorage.getItem(b["i"])){e.next=3;break}return Object(v["a"])(E["d"].error),e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var C=T,P=n("4360"),I=(n("f5df1"),n("840a"),n("157a"),n("b650")),L=n("7744"),G=n("34e9"),D=n("e11d"),Y=n("92e2"),V=n("6b41"),J=n("0a7d"),U=n("ad06"),$=n("44bf"),F=n("e41f"),K=n("626a"),B=n("772a"),H=n("565f"),W=n("0b33"),q=n("5e46"),z=n("ac28"),Q=n("2ed4"),X=n("f0ca"),Z=n("d961"),ee=n("2d6d"),te=n("d314"),ne=n("a3e2"),ae=n("471a"),se=n("7278"),re=n("58e6"),ue=n("8f80"),ie=Object(a["f"])(p);ie.use(C),ie.use(P["a"]),ie.use(I["a"]),ie.use(L["a"]),ie.use(G["a"]),ie.use(D["a"]),ie.use(Y["a"]),ie.use(V["a"]),ie.use(J["a"]),ie.use(U["a"]),ie.use($["a"]),ie.use(F["a"]),ie.use(K["a"]),ie.use(B["a"]),ie.use(H["a"]),ie.use(W["a"]),ie.use(q["a"]),ie.use(z["a"]),ie.use(Q["a"]),ie.use(X["a"]),ie.use(Z["a"]),ie.use(ee["a"]),ie.use(te["a"]),ie.use(ne["a"]),ie.use(ae["a"]),ie.use(se["a"]),ie.use(re["a"]),ie.use(ue["a"]),ie.mount("#app")},"621f":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u}));var a={default:{min:-99,max:0,error:{value:-99,message:"默认错误,请求失败",type:"danger"},warning:{value:-2,message:"默认警告,请求失败",type:"warning"},fail:{value:-1,message:"请求失败",directions:"请求失败,用于default",type:"warning"},success:{value:0,message:"请求成功",directions:"请求成功",type:"success"}},system:{min:1e4,max:10999,directions:"表示系统的基本响应代码",login:{min:10010,max:10019,success:{value:10010,message:"登录成功",type:"success"},fail:{value:10011,message:"账户或密码错误",type:"warning"},failAsLcData:{value:10012,message:"请输入用户名或密码",type:"danger"},error:{value:10019,message:"登录出错",type:"danger"}},register:{min:10020,max:10029,success:{value:10020,message:"注册成功",type:"success"},fail:{value:10021,message:"注册失败",type:"warning"},failAsAcIsRe:{value:10022,message:"注册失败,该账号已被注册",type:"warning"},failAsAcIsWr:{value:10023,message:"注册失败,账号名不满足注册要求",type:"warning"},error:{value:10029,message:"注册出错",type:"danger"}},notify:{min:10700,max:10799,newFriend:{value:10700,message:"新好友申请通知",type:"success"},newGroupMember:{value:10701,message:"新群成员添加通知",type:"success"},newFriendNotify:{value:10702,message:"新好友消息",type:"success"},newGroupMeberNotify:{value:10703,message:"新群成员通知",type:"success"}},confirm:{min:10800,max:10899,token:{min:10800,max:10809,normal:{value:10800,message:"token正常",type:"success"},changeAgent:{value:10801,message:"检测到其他设备登录",type:"warning"},originIpChangeAgent:{value:10802,message:"检测到其他设备登录",type:"warning"},safe:{value:10803,message:"token安全值",type:"warning"},changeIp:{value:10804,message:"检测到ip异常",type:"danger"},changeIpAndAgent:{value:10805,message:"检测到ip和登录设备异常",type:"danger"},expired:{value:10806,message:"token过期",type:"warning"},noPermission:{value:10807,message:"noPermission",type:"danger"},danger:{value:10808,message:"危险的token",type:"danger"},error:{value:10809,message:"请先登录",type:"danger"}}},catchErr:{min:10900,max:10999,wsConnectError:{value:10995,message:"网络连接错误",type:"warning"},databaseError:{value:10996,message:"数据库错误",type:"danger"},deviceException:{value:10997,message:"设备异常",type:"danger"},netException:{value:10998,message:"ip异常",type:"danger"},error:{value:10999,message:"服务器开小差了",type:"danger"}}},relation:{min:11e3,max:11999,base:{noData:{value:11e3,message:"缺少关键参数",type:"warning"},errorData:{value:11001,message:"参数错误",type:"danger"}},add:{min:11010,max:11029,success:{min:11010,max:11014,friend:{value:11010,message:"发送成功",directions:"仅表示发送的请求成功,对方还未同意",type:"success"},group:{value:11011,message:"发送成功",type:"success"},addFriend:{value:11013,message:"你有一位新的好友",directions:"仅表示发送的请求成功,对方还未同意",type:"success"},addGroup:{value:11014,message:"你已加入群组",type:"success"}},fail:{min:11015,max:11019,already:{value:11015,message:"你们已经是好友了",type:"success"},alreadyInGroup:{value:11016,message:"你已在群组中",type:"success"},undone:{value:11017,message:"表示该联系已被对方拒绝",type:"warning"},undoneGroup:{value:11018,message:"群组请求被拒绝",type:"warning"}},warning:{min:11020,max:11024},error:{min:11025,max:11029,param:{value:11028,message:"新建联系出错,缺少重要参数",type:"danger"},serverErr:{value:11029,message:"新增好友或群组时错误,内部参数错误",type:"danger"}}},confirmAdd:{min:"11030",max:"11049",success:{agreeFriend:{value:11030,message:"同意添加好友成功",type:"success"},agreeGroup:{value:11031,message:"加群成功",type:"success"}},fail:{friend:{value:11035,message:"同意添加好友失败",type:"warning"},group:{value:11036,message:"拒绝加入群组",type:"warning"}},error:{friend:{value:11045,message:"同意好友请求出错",type:"danger"},group:{value:11046,message:"加入群组出错",type:"danger"},param:{value:11047,message:"参数错误",type:"danger"},noPermission:{value:11048,message:"Sorry,permission denied",type:"danger"},serverErr:{value:11049,message:"服务器错误",type:"danger"}}},update:{min:11050,max:11059,success:{type:"success",message:"修改成功",value:11050},fail:{value:11051,message:"修改失败",type:"warning"},error:{value:11059,message:"修改错误",type:"danger"}},del:{},query:{min:11100,max:11199,all:{success:{value:11100,message:"用户所有的关系结果",type:"success"},error:{value:11109,message:"所有查询出错",type:"danger"}},user:{success:{value:11110,message:"查询成功",type:"success"},fail:{value:11111,message:"查询失败",type:"warning"},error:{value:11119,message:"用户查询错误",type:"danger"}}}},chat:{min:12e3,max:12999,maxUseNow:12499,open:{min:12e3,max:12099,sendMessage:{value:12e3,message:"首次连接,接收未读取消息",type:"success"},openMessage:{value:12001,message:"chat-backend service for you",type:"success"}},close:{min:12100,max:12199,success:{value:12100,message:"退出成功",type:"success"}},message:{min:12200,max:12399,heartBeat:{value:12200,message:"心跳消息",type:"success"},send:{min:12210,max:12249,success:{min:12210,max:12219,toStranger:{value:12210,message:"陌生消息发送成功",type:"success"},toUser:{value:12211,message:"用户消息发送成功，陌生或好友消息",type:"success"},toGroup:{value:12212,message:"群组消息发送成功",type:"success"},toSystem:{value:12213,message:"系统消息发送成功",type:"success"},toGroupAll:{value:12214,message:"群组全体消息发送成功",type:"success"},toSystemNotify:{value:12215,message:"系统通知消息成功",type:"success"}},fail:{min:12220,max:12229,toStranger:{value:12220,message:"陌生消息发送失败",type:"warning"},toUser:{value:12221,message:"用户消息发送失败，陌生或好友消息",type:"warning"},toGroup:{value:12222,message:"群组消息发送失败",type:"warning"},toSystem:{value:12223,message:"系统消息发送失败",type:"warning"},toGroupAll:{value:12224,message:"群组全体消息发送失败",type:"warning"},toSystemNotify:{value:12225,message:"系统通知消息失败",type:"warning"}},error:{min:12230,max:12239,noReminderLevel:{value:12230,message:"没有设置提醒级别",type:"danger"},noPermission:{value:12231,message:"没有权限发送该消息",type:"danger"}}},revoke:{min:12250,max:12259,success:{value:12250,message:"消息撤销成功",type:"success"},fail:{value:12251,message:"消息撤销失败，原因超时了",type:"warning"},noPermission:{value:12252,message:"没有权限撤回该消息",type:"danger"}}},error:{min:12400,max:12499,notype:{value:12400,message:"错误的请求，没有请求类型",type:"danger"},nodata:{value:12401,message:"错误的请求，该请求需要数据",type:"danger"},type:{value:12402,message:"错误的类型",type:"danger"},messageType:{value:12403,message:"错误的消息类型",type:"danger"},noPermission:{value:12404,message:"Sorry,permission denied",type:"danger"},closeErr:{value:12405,message:"用户退出连接错误",type:"danger"},catchErr:{value:12499,message:"chat中捕获到的系统异常",type:"danger"}}},reserved:{min:13e3,max:15999},account:{min:16e3,max:16100,query:{min:16010,max:16019,success:{value:16e3,message:"查询成功",type:"success"},fail:{value:16001,message:"查询失败",type:"warning"},error:{value:16002,message:"查询错误",type:"danger"}},update:{min:16020,max:16029,success:{value:16020,message:"修改成功",type:"success"},fail:{value:16021,message:"修改失败",type:"warning"},error:{value:16022,message:"修改出错",type:"danger"}}}},s=a.system.confirm.token,r=a.system.login,u=a.system.register},"6b08":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return l}));n("d81d");var a=n("a49b"),s=n("4360"),r=n("343a");function u(e){return"/query"+e}function i(e){return Object(r["a"])({url:u("/groupId")},e)}function c(){return Object(r["b"])({url:u("/all")},{}).then((function(e){return e}))}function o(e){return Object(r["b"])({url:u("/id")},{id:e})}function l(e){return Object(r["b"])({url:u("/key-word")},{keyWord:e}).then((function(e){return e.data.groups.map((function(e){var t=JSON.stringify({id:e.id,type:a["a"]});s["a"].commit("profile",{key:t,profile:e})})),e.data.users.map((function(e){var t=JSON.stringify({id:e.id,type:a["j"]});s["a"].commit("profile",{key:t,profile:e})})),e.data}))}},a49b:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return d})),n.d(t,"a",(function(){return g})),n.d(t,"i",(function(){return m})),n.d(t,"f",(function(){return l})),n.d(t,"k",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return o}));var a="127.0.0.1",s="9000",r=a+":"+s,u="http://"+r,i={FIRST_CONNECT:"OPEN",HEARTBEAT_MESSAGE:"HEARTBEAT",SEND_MESSAGE:"SEND",RECEVICE_MESSAGE:"RECEVICE",REVOKE_MESSAGE:"REVOKE",CLOSE_CONNECT:"CLOSE"},c={TYPE:{STRANGER:0,FRIEND:1,GROUP:2},REMINDER_LEVEL:{RECEIVE_AND_NOTIFY:0,RECEIVE_AND_NOT_NOTIFY:1,REJECT:2}},o={STATE:{SERVER_RECEIVING:0,SERVER_REFUSED:-1,TAKE_OVER:2,REVOKE:3},SYS_NOTIY_SENDID:0,SYS_SENDID:-1,SEND_TYPE:{STRANGER_MESSAGE:0,FRIEND_MESSAGE:1,GROUP_MESSAGE:2,GROUP_ALL_MESSAGE:3,SYSTEM_MESSAGE:4,SYSTEM_NOTIFY_MESSAGE:5},TYPE:{NORMAL_MESSAGE:0},SYS_REVOKE_REPLACE:"系统撤回了一条消息",OWN_REVOKE_REPLACE:"群主撤回了一条消息",RELATION_REVOKE_REPLACE:"对方撤回了一条消息",MY_REVOKE_REPLACE:"你撤回了一条消息"},l="网络错误",m="token",d="USER_TYPE",g="GROUP_TYPE",f="SYSTEM_TYPE",p=999999999},d5f3:function(e,t,n){},e97b:function(e,t,n){"use strict";n("d5f3")},f42b:function(e,t,n){e.exports=n.p+"img/avatar.d79139bd.jpg"}});
//# sourceMappingURL=app.2247f19a.js.map